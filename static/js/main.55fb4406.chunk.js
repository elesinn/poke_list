(this["webpackJsonppoke-list"]=this["webpackJsonppoke-list"]||[]).push([[0],{109:function(e,t,n){e.exports=n.p+"static/media/default.498b37b6.jpg"},137:function(e,t,n){e.exports=n(245)},142:function(e,t,n){},144:function(e,t,n){},245:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(6),c=n.n(o),i=(n(142),n(143),n(144),n(254)),s=n(248),l=n(124),u=n(253),m=n(57),f=n(249),p=n(255),d=n(252),h=n(36),g=n(109),E=n.n(g),k=n(21),b=n(250),v=function(e){var t=e.pokemon,n=e.visible,o=e.handleOk,c=e.store,i=Object(a.useState)({}),l=Object(m.a)(i,2),u=l[0],f=l[1],p=Object(a.useState)(!1),g=Object(m.a)(p,2),E=g[0],v=g[1];return Object(a.useEffect)((function(){n&&(v(!1),c.getDetailedAbilities(t.id).then((function(e){f(e.map((function(e){return{name:e.names[2].name,description:e.effect_entries[0].effect}}))),v(!0)})))}),[n]),Object(k.c)((function(){return r.a.createElement(b.a,{title:"Abilities",visible:n,onCancel:o,footer:[r.a.createElement(h.a,{key:"back",type:"primary",onClick:o},"Return")]},E?r.a.createElement(s.a,{itemLayout:"horizontal",dataSource:u,renderItem:function(e){return r.a.createElement(s.a.Item,null,r.a.createElement(s.a.Item.Meta,{title:e.name,description:e.description}))}}):r.a.createElement(d.a,{active:!0,loading:!0}))}))},y=function(e){var t=e.pokemon,n=e.store,o=Object(a.useState)(!1),c=Object(m.a)(o,2),i=c[0],l=c[1];Object(a.useEffect)((function(){t.isCompleteData||n.getDetailedInfo(t.id)}),[t]);var u=function(e){e.target.src=E.a},g=function(){l(!0)};return Object(k.c)((function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{hoverable:!0,title:t.name,className:"animated-card"},r.a.createElement("div",{className:"img-container"},r.a.createElement("img",{onError:u,alt:"pokemon",src:t.image})),t.isCompleteData?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,t.tags.map((function(e){return r.a.createElement(p.a,{key:e,className:"type-".concat(e)},e)}))),r.a.createElement(s.a,{header:r.a.createElement("div",null,r.a.createElement("b",null,"Main stats:")),dataSource:t.stats,renderItem:function(e){return r.a.createElement(s.a.Item,null,r.a.createElement("span",null,e.name,":")," ",e.value)}})):r.a.createElement(d.a,{active:!0,loading:!0,paragraph:{rows:6}}),r.a.createElement(h.a,{key:"show",type:"primary",size:"large",onClick:g},"Show abilities")),r.a.createElement(v,{pokemon:t,visible:i,handleOk:function(){return l(!1)},store:n}))}))},O=n(251),j=n(136),I=function(e){var t=e.handleCheck,n=e.checked,a=Object(j.a)(e,["handleCheck","checked"]);return r.a.createElement(p.a.CheckableTag,Object.assign({},a,{checked:n,onChange:function(e){t(e)}}))},C=Object(k.a)((function(e){var t=e.store;Object(a.useEffect)((function(){t.getTypes()}),[]);return r.a.createElement("div",{className:"list-header"},r.a.createElement("div",{className:"search-container"},r.a.createElement(O.a,{placeholder:"Enter Pokemon name",value:t.filter,onChange:function(e){var n=e.target.value;t.updateFilter(n)}})),t.typesIsLoaded?r.a.createElement("div",{className:"types"},"Filter by already loaded pokemons (avoid API spam), change page to load more pokemons.",r.a.createElement("br",null),t.types.map((function(e){return r.a.createElement(I,{key:e.name,className:"type-".concat(e.name),handleCheck:function(n){return function(e,n){n?t.selectTag(e):t.unselectTag(e)}(e.name,n)},checked:e.selected},e.name)}))):r.a.createElement(l.a,{size:"large"}))})),w=r.a.createContext(),P=function(e){var t=e.children,n=Object(k.b)((function(){return{pokemons:[],types:[],filter:"",pokemonsIsLoaded:!1,typesIsLoaded:!1,addPokemon:function(e){n.pokemons.push(e)},get filteredPokemons(){var e=new RegExp(n.filter,"i");return n.pokemons.filter((function(t){var a=t.name;return!n.filter||e.test(a)})).filter((function(e){return!(n.selectedTags.length>0)||!!e.tags&&e.tags.some((function(e){return n.selectedTags.includes(e)}))}))},get selectedTags(){return n.types.filter((function(e){return!0===e.selected})).map((function(e){return e.name}))},updateFilter:function(e){n.filter=e},selectTag:function(e){n.types.find((function(t){return t.name===e})).selected=!0},unselectTag:function(e){n.types.find((function(t){return t.name===e})).selected=!1},getPokemonsList:function(){fetch("https://pokeapi.co/api/v2/pokemon/?limit=1000").then((function(e){return e.json()})).then((function(e){var t=e.results.map((function(e){var t=e.url.split("/").slice(-2,-1);return{id:t,name:e.name.charAt(0).toUpperCase()+e.name.slice(1),isCompleteData:!1,image:"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/".concat(t,".png")}}));n.pokemons=t,n.pokemonsIsLoaded=!0}),(function(e){console.log("ERROR:",e)}))},getTypes:function(){fetch("https://pokeapi.co/api/v2/type/").then((function(e){return e.json()})).then((function(e){n.types=e.results,n.types.forEach((function(e,t){return n.types[t].selected=!1})),n.typesIsLoaded=!0}),(function(e){console.log("ERROR:",e)}))},getDetailedInfo:function(e){fetch("https://pokeapi.co/api/v2/pokemon/".concat(e)).then((function(e){return e.json()})).then((function(t){var a=n.pokemons.find((function(t){return t.id===e}));a.tags=t.types.reduce((function(e,t){return e.push(t.type.name),e}),[]),a.stats=t.stats.reduce((function(e,t){return e.push({name:t.stat.name,value:t.base_stat}),e}),[]),a.abilities=t.abilities.reduce((function(e,t){return e.push(t.ability),e}),[]),a.isCompleteData=!0}),(function(e){console.log("ERROR",e)}))},getDetailedAbilities:function(e){var t=n.pokemons.find((function(t){return t.id===e})),a=[];return t.abilities.forEach((function(e){a.push(fetch(e.url).then((function(e){return e.json()})))})),Promise.all(a)}}}));return r.a.createElement(w.Provider,{value:n},t)},R=i.a.Header,N=i.a.Footer,T=i.a.Content,L=function(){var e=Object(a.useContext)(w);return Object(a.useEffect)((function(){e.getPokemonsList()}),[]),Object(k.c)((function(){return r.a.createElement(i.a,null,r.a.createElement(R,null,"Pokemons"),r.a.createElement(T,{className:"main-wrapper"},r.a.createElement("div",{className:"main-content"},e.pokemonsIsLoaded?r.a.createElement(s.a,{grid:{gutter:16,xs:1,sm:3,lg:4,xl:6},pagination:{pageSizeOptions:["10","20","50"]},header:r.a.createElement(C,{store:e}),dataSource:e.filteredPokemons,renderItem:function(t){return r.a.createElement(s.a.Item,null,r.a.createElement(y,{pokemon:t,store:e}))}}):r.a.createElement(l.a,{size:"large"}))),r.a.createElement(u.a,null),r.a.createElement(N,{className:"footer"},"\xa9 PokeApp"))}))},D=function(){return r.a.createElement(P,null,r.a.createElement(L,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(242);c.a.render(r.a.createElement(D,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[137,1,2]]]);
//# sourceMappingURL=main.55fb4406.chunk.js.map